<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>取引登録 - ココトシ</title>
  <script>
    function calculateTotal() {
      const price = parseFloat(document.getElementById('price').value) || 0;
      const quantity = parseInt(document.getElementById('quantity').value) || 0;
      document.getElementById('total').innerText = (price * quantity).toFixed(2) + ' 円';
    }
    window.onload = function() {
      calculateTotal();
    }
  </script>
</head>
<body>
  <h1>取引登録フォーム</h1>
  <form method="POST">
    <label>種別：
      <select name="type">
        <option value="buy">買い</option>
        <option value="sell">売り</option>
      </select>
    </label><br><br>

    <label>銘柄：<input type="text" name="stock" required></label><br><br>
    <label>株価：<input type="number" id="price" name="price" step="0.01" required onchange="calculateTotal()"></label><br><br>
    <label>数量：<input type="number" id="quantity" name="quantity" value="100" required onchange="calculateTotal()"></label><br><br>
    <label>取引額：<span id="total">0 円</span></label><br><br>
    <label>日付：<input type="date" name="date" value="{{ today }}" required></label><br><br>
    <label>感情：
      <select name="feeling">
        <option value="">未設定</option>
        <option value="1">😖</option>
        <option value="2">😞</option>
        <option value="3">😐</option>
        <option value="4">🙂</option>
        <option value="5">😄</option>
      </select>
    </label><br><br>
    <label>メモ：<br><textarea name="memo" rows="4" cols="40"></textarea></label><br><br>
    <button type="submit">登録</button>
  </form>
</body>
</html>
